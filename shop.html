<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>eFootball Shop</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="firebase.js"></script>

<style>
body{
 margin:0;
 background:#0b0f1a;
 font-family:Arial;
 color:white;
}
.top{
 background:#12172a;
 padding:15px;
 display:flex;
 justify-content:space-between;
 align-items:center;
}
.container{ padding:20px; }

.pack-grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
 gap:30px;
}

.pack{
 background:linear-gradient(145deg,#1f1f2a,#0b0f1a);
 border-radius:30px;
 padding:20px;
 min-height:500px;
 text-align:center;
 cursor:pointer;
 position:relative;
 box-shadow:0 10px 25px rgba(0,0,0,.5);
 transition:.4s;
}
.pack:hover{ transform:translateY(-6px); }

.pack img{
 width:100%;
 max-height:210px;
 object-fit:contain;
 border-radius:20px;
}

.pack h3{ margin:10px 0 5px; }
.price{
 color:#ffd700;
 font-size:18px;
 font-weight:bold;
}

.tag{
 position:absolute;
 top:10px;
 right:10px;
 background:#ff9800;
 color:black;
 padding:5px 12px;
 border-radius:20px;
 font-size:12px;
 font-weight:bold;
}

.btn{
 margin-top:8px;
 padding:8px 18px;
 border:none;
 border-radius:20px;
 cursor:pointer;
 font-size:14px;
}
.view{ background:#1e88e5; color:white; }
.buy{ background:#43a047; color:white; }
.buy9{ background:#f44336; color:white; }

.animation{
 position:absolute;
 inset:0;
 background:rgba(0,0,0,.85);
 display:none;
 justify-content:center;
 align-items:center;
 font-size:22px;
 z-index:5;
}

.result-card{
 margin-top:15px;
 display:flex;
 justify-content:center;
 flex-wrap:wrap;
 position:relative;
 z-index:10;
}

.card{
 background:#000000;
 border-radius:1px;
 padding:1px;
 width:130px;
 margin:0px;
 box-shadow:0 6px 15px rgba(0, 17, 255, 0.384);
}
.card img{
 width:100%;
 height:140px;
 object-fit:contain;
}
.rating{ color:#ffd700; font-weight:bold; }
.pos{
 background:#1e88e5;
 border-radius:12px;
 padding:2px 10px;
 font-size:12px;
 display:inline-block;
 margin-top:4px;
}

.disabled{
 opacity:.4;
 pointer-events:none;
}

/* MODAL */
.modal{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.85);
 display:none;
 justify-content:center;
 align-items:center;
 z-index:9999;
}
.modal-box{
 position:relative;
 background:#12172a;
 width:90%;
 max-width:900px;
 border-radius:20px;
 padding:20px;
 max-height:80vh;
 overflow-y:auto;
}
.modal-grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
 gap:15px;
 margin-top:15px;
}
.close-btn{
 cursor:pointer;
 font-size:22px;
 font-weight:bold;
 position:absolute;
 top:15px;
 right:20px;
 z-index:10001;
}

/* VIDEO MODAL */
#videoModal{
 position:fixed;
 inset:0;
 width:100vw;
 height:100vh;
 background:black;
 display:none;
 justify-content:center;
 align-items:center;
 z-index:10000;
 overflow:hidden;
}
#videoModal video{
 width:100%;
 height:100%;
 object-fit:cover; /* Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
}
#videoModal .close-btn{
 top:10px;
 right:15px;
 color:white;
}
</style>
</head>

<body>

<div class="top">
 <div onclick="location.href='home.html'" style="cursor:pointer">â¬… Ø±Ø¬ÙˆØ¹</div>
 <div>ğŸ›’ Ù…ØªØ¬Ø± eFootball</div>
</div>

<div class="container">
 <div class="pack-grid" id="packGrid"></div>
</div>

<!-- MODAL Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
<div class="modal" id="modal">
 <div class="modal-box">
  <h3 id="modalTitle"></h3>
  <div class="close-btn" onclick="closeModal()">âŒ</div>
  <div class="modal-grid" id="modalPlayers"></div>
 </div>
</div>

<!-- MODAL Ù„Ù„ÙÙŠØ¯ÙŠÙˆ -->
<div class="modal" id="videoModal">
 <video id="packVideo" autoplay></video>
</div>

<script>
firebase.auth().onAuthStateChanged(user=>{
 if(!user) return location="index.html";
 const uid=user.uid;
 const userRef=firebase.database().ref("usersefoot/"+uid);

 userRef.once("value").then(s=>{
  userRef.update({
   weeklyOpens:s.val()?.weeklyOpens ?? 0,
   boxPurchased:s.val()?.boxPurchased ?? false
  });
 });

 const packs=[
 {
  name:"POTW 8 Jan '26",
  image:"https://i.ytimg.com/vi/MSgqxDbbwlE/hq720.jpg",
  cost:100,
  type:"weekly",
  max:3,
  video:"POTW.mp4",
  players:[
   {name:"Lautaro MartÃ­nez",rating:99,position:"CF",img:"https://i.imgur.com/vQw7NsE.png"},
   {name:"DÃ©sirÃ© DouÃ©",rating:96,position:"RWF",img:"https://i.imgur.com/799V5yR.png"},
   {name:"Giorgio Scalvini",rating:96,position:"CB",img:"https://i.imgur.com/aoS2WP1.png"},
   {name:"Igor Thiago",rating:95,position:"CF",img:"https://i.imgur.com/7LVtFnw.png"},
   {name:"Gonzalo GarcÃ­a",rating:94,position:"CF",img:"https://i.imgur.com/8XGFeG0.png"},
   {name:"FermÃ­n LÃ³pez",rating:94,position:"AMF",img:"https://i.imgur.com/TmtKFLq.png"},
   {name:"NicolÃ¡s Tagliafico",rating:93,position:"LB",img:"https://i.imgur.com/RYEv2Te.png"},
   {name:"Mathew Ryan",rating:93,position:"GK",img:"https://i.imgur.com/8LdgoVW.png"},
   {name:"John McGinn",rating:93,position:"RMF",img:"https://i.imgur.com/uhmBl3H.png"},
   {name:"Vangelis Pavlidis",rating:93,position:"CF",img:"https://i.imgur.com/uYo1yM5.png"},
   {name:"Mateus ManÃ©",rating:91,position:"CMF",img:"https://i.imgur.com/TKhJD2c.png"}
  ]
 },
 {
  name:"ğŸ Lionel Messi Starter Pack",
  image:"https://i.imgur.com/F7ITAzB.png",
  cost:1800,
  type:"boxPack",
  video:"MESSI.mp4",
  players:[
   {name:"Lionel Messi",rating:100,position:"RWF",img:"https://i.imgur.com/JSh5sQi.png"},
  ]
 },
 {
  name:"Epic & Show Time: Breakthrough Pass A",
  image:"https://www.konami.com/efootball/s/img/promotion/agent/1131/promo_agent.png",
  cost:100,
  type:"single",
  video:"epickaka.mp4",
  players:[
   {name:"KakÃ¡ 105",rating:105,position:"AMF",img:"https://i.imgur.com/oCmzT7G.png"},
   {name:"KakÃ¡",rating:101,position:"AMF",img:"https://i.imgur.com/J6jaJK3.png"},
   {name:"Andriy Shevchenko",rating:101,position:"CF",img:"https://i.imgur.com/ZBk7G7U.png"},
   {name:"Kylian MbappÃ©",rating:101,position:"CF",img:"https://i.imgur.com/K6hMXWF.png"},
   {name:"Arda GÃ¼ler",rating:100,position:"AMF",img:"https://i.imgur.com/GddasYo.png"},
   {name:"Antoine Griezmann",rating:81,position:"SS",img:"https://efootballhub.net/images/efootball24/players/42316_l.webp"},
   {name:"Valentin Rosier",rating:73,position:"RB",img:"https://efootballhub.net/images/efootball24/players/113443_l.webp"},
   {name:"Mbwana Samatta",rating:73,position:"CF",img:"https://efootballhub.net/images/efootball24/players/119694_l.webp"},
   {name:"Michael Kayode",rating:73,position:"RB",img:"https://efootballhub.net/images/efootball24/players/159570_l.webp"},
   {name:"Sergi Altimira",rating:73,position:"DMF",img:"https://efootballhub.net/images/efootball24/players/155300_l.webp"},
   {name:"H. Van Crombrugge",rating:73,position:"GK",img:"https://efootballhub.net/images/efootball24/players/119638_l.webp"},
   {name:"EstÃªvÃ£o",rating:76,position:"RWF",img:"https://efootballhub.net/images/efootball24/players/167167_l.webp"},
   {name:"Brandon Mechele",rating:76,position:"CB",img:"https://efootballhub.net/images/efootball24/players/113241_l.webp"},
   {name:"Benjamin Pavard",rating:78,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104752_l.webp"},
   {name:"Alexander Satariano",rating:65,position:"CF",img:"https://efootballhub.net/images/efootball24/players/144968_l.webp"},
   {name:"Kim Gun-Hee",rating:67,position:"CF",img:"https://efootballhub.net/images/efootball24/players/111777_l.webp"},
   {name:"Kimiya Moriyama",rating:67,position:"LB",img:"https://efootballhub.net/images/efootball24/players/143103_l.webp"},
   {name:"Kim Jun-Ho",rating:67,position:"CMF",img:"https://efootballhub.net/images/efootball24/players/16922558_l.webp"},
   {name:"David Soria",rating:78,position:"GK",img:"https://efootballhub.net/images/efootball24/players/107901_l.webp"},
   {name:"ÄorÄ‘e PetroviÄ‡",rating:77,position:"GK",img:"https://efootballhub.net/images/efootball24/players/143823_l.webp"},
   {name:"Mohammed Kudus",rating:78,position:"LMF",img:"https://efootballhub.net/images/efootball24/players/126614_l.webp"},
   {name:"Kyle Walker",rating:77,position:"RB",img:"https://efootballhub.net/images/efootball24/players/41119_l.webp"},
   {name:"Conor Gallagher",rating:77,position:"CMF",img:"https://efootballhub.net/images/efootball24/players/131728_l.webp"},
   {name:"Pierre Aubameyang",rating:77,position:"CF",img:"https://efootballhub.net/images/efootball24/players/40323_l.webp"},
   {name:"Joe Gomez",rating:77,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104337_l.webp"},
   {name:"Andrea Pinamonti",rating:76,position:"CF",img:"https://efootballhub.net/images/efootball24/players/113679_l.webp"},
   {name:"John Victor",rating:76,position:"GK",img:"https://efootballhub.net/images/efootball24/players/113446_l.webp"},
   {name:"Lucas Perri",rating:76,position:"GK",img:"https://efootballhub.net/images/efootball24/players/110394_l.webp"},
   {name:"Adrien Truffert",rating:76,position:"LB",img:"https://efootballhub.net/images/efootball24/players/139934_l.webp"},
   {name:"Samuel Iling-Junior",rating:72,position:"LWF",img:"https://efootballhub.net/images/efootball24/players/155280_l.webp"},
   {name:"Junior Sambia",rating:72,position:"RB",img:"https://efootballhub.net/images/efootball24/players/108152_l.webp"},
   {name:"LÃ©o CearÃ¡",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/107944_l.webp"},
   {name:"Yuma Suzuki",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/105988_l.webp"},
   {name:"Alexander Scholz",rating:74,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104784_l.webp"}
  ]
 },
 {
  name:"Epic: European Clubs Midfielders",
  image:"https://www.konami.com/efootball/s/img/promotion/agent/1138/promo_agent.png",
  cost:100,
  type:"single",
  video:"epicdefc.mp4",
  players:[
   {name:"Edgar Davids 104",rating:104,position:"DMF",img:"https://i.imgur.com/fbMZGEw.png"},
   {name:"Phillip Cocu",rating:99,position:"DMF",img:"https://i.imgur.com/AkxTlj1.png"},
   {name:"Hidetoshi Nakata",rating:99,position:"AMF",img:"https://i.imgur.com/etxZBQ1.png"},
   {name:"Antoine Griezmann",rating:81,position:"SS",img:"https://efootballhub.net/images/efootball24/players/42316_l.webp"},
   {name:"MbappÃ©",rating:95,position:"CF",img:"https://i.imgur.com/LbpUpXd.png"},
   {name:"Bellingham",rating:95,position:"AMF",img:"https://i.imgur.com/KbHaiZE.png"},
   {name:"VinÃ­cius Jr",rating:95,position:"LWF",img:"https://i.imgur.com/VpKe1ns.png"},
   {name:"Mateus Castro",rating:93,position:"AMF",img:"https://i.imgur.com/ouc4EQ2.png"},
   {name:"Taiyo Hiraoka",rating:91,position:"CMF",img:"https://i.imgur.com/vq3nMzm.png"},
   {name:"Shunta Tanaka",rating:91,position:"DMF",img:"https://i.imgur.com/a2MnvPz.png"},
   {name:"Yuto Iwasaki",rating:91,position:"LMF",img:"https://i.imgur.com/BffV1Kk.png"},
   {name:"LÃ©o CearÃ¡",rating:87,position:"CF",img:"https://efootballhub.net/images/efootball24/players/53877143610792_l.webp"},
   {name:"Saliba",rating:83,position:"CB",img:"https://i.imgur.com/PaFRvqk.png"},
   {name:"Oblak",rating:82,position:"GK",img:"https://i.imgur.com/UzxEDnC.png"},
   {name:"Alexander Satariano",rating:65,position:"CF",img:"https://efootballhub.net/images/efootball24/players/144968_l.webp"},
   {name:"Kim Gun-Hee",rating:67,position:"CF",img:"https://efootballhub.net/images/efootball24/players/111777_l.webp"},
   {name:"Kimiya Moriyama",rating:67,position:"LB",img:"https://efootballhub.net/images/efootball24/players/143103_l.webp"},
   {name:"Kim Jun-Ho",rating:67,position:"CMF",img:"https://efootballhub.net/images/efootball24/players/16922558_l.webp"},
   {name:"Samuel Iling-Junior",rating:72,position:"LWF",img:"https://efootballhub.net/images/efootball24/players/155280_l.webp"},
   {name:"Junior Sambia",rating:72,position:"RB",img:"https://efootballhub.net/images/efootball24/players/108152_l.webp"},
   {name:"LÃ©o CearÃ¡",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/107944_l.webp"},
   {name:"Yuma Suzuki",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/105988_l.webp"},
   {name:"Valentin Rosier",rating:73,position:"RB",img:"https://efootballhub.net/images/efootball24/players/113443_l.webp"},
   {name:"Mbwana Samatta",rating:73,position:"CF",img:"https://efootballhub.net/images/efootball24/players/119694_l.webp"},
   {name:"Michael Kayode",rating:73,position:"RB",img:"https://efootballhub.net/images/efootball24/players/159570_l.webp"},
   {name:"Sergi Altimira",rating:73,position:"DMF",img:"https://efootballhub.net/images/efootball24/players/155300_l.webp"},
   {name:"H. Van Crombrugge",rating:73,position:"GK",img:"https://efootballhub.net/images/efootball24/players/119638_l.webp"},
   {name:"EstÃªvÃ£o",rating:76,position:"RWF",img:"https://efootballhub.net/images/efootball24/players/167167_l.webp"},
   {name:"Brandon Mechele",rating:76,position:"CB",img:"https://efootballhub.net/images/efootball24/players/113241_l.webp"},
   {name:"Benjamin Pavard",rating:78,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104752_l.webp"},
   {name:"Alexander Satariano",rating:65,position:"CF",img:"https://efootballhub.net/images/efootball24/players/144968_l.webp"},
   {name:"Kim Gun-Hee",rating:67,position:"CF",img:"https://efootballhub.net/images/efootball24/players/111777_l.webp"},
   {name:"Kimiya Moriyama",rating:67,position:"LB",img:"https://efootballhub.net/images/efootball24/players/143103_l.webp"},
   {name:"Kim Jun-Ho",rating:67,position:"CMF",img:"https://efootballhub.net/images/efootball24/players/16922558_l.webp"},
   {name:"David Soria",rating:78,position:"GK",img:"https://efootballhub.net/images/efootball24/players/107901_l.webp"},
   {name:"ÄorÄ‘e PetroviÄ‡",rating:77,position:"GK",img:"https://efootballhub.net/images/efootball24/players/143823_l.webp"},
   {name:"Mohammed Kudus",rating:78,position:"LMF",img:"https://efootballhub.net/images/efootball24/players/126614_l.webp"},
   {name:"Kyle Walker",rating:77,position:"RB",img:"https://efootballhub.net/images/efootball24/players/41119_l.webp"},
   {name:"Conor Gallagher",rating:77,position:"CMF",img:"https://efootballhub.net/images/efootball24/players/131728_l.webp"},
   {name:"Pierre Aubameyang",rating:77,position:"CF",img:"https://efootballhub.net/images/efootball24/players/40323_l.webp"},
   {name:"Joe Gomez",rating:77,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104337_l.webp"},
   {name:"Andrea Pinamonti",rating:76,position:"CF",img:"https://efootballhub.net/images/efootball24/players/113679_l.webp"},
   {name:"John Victor",rating:76,position:"GK",img:"https://efootballhub.net/images/efootball24/players/113446_l.webp"},
   {name:"Lucas Perri",rating:76,position:"GK",img:"https://efootballhub.net/images/efootball24/players/110394_l.webp"},
   {name:"Adrien Truffert",rating:76,position:"LB",img:"https://efootballhub.net/images/efootball24/players/139934_l.webp"},
   {name:"Samuel Iling-Junior",rating:72,position:"LWF",img:"https://efootballhub.net/images/efootball24/players/155280_l.webp"},
   {name:"Junior Sambia",rating:72,position:"RB",img:"https://efootballhub.net/images/efootball24/players/108152_l.webp"},
   {name:"LÃ©o CearÃ¡",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/107944_l.webp"},
   {name:"Yuma Suzuki",rating:74,position:"CF",img:"https://efootballhub.net/images/efootball24/players/105988_l.webp"},
   {name:"Alexander Scholz",rating:74,position:"CB",img:"https://efootballhub.net/images/efootball24/players/104784_l.webp"}
  ]
 }
 ];

 function rand(players){
  let total = 0;
  const probs = players.map(p => {
    let prob;
    if(p.rating >= 115) prob = 2;
    else if(p.rating >= 105) prob = 3;
    else if(p.rating >= 97) prob = 7;
    else if(p.rating >= 90) prob = 15;
    else if(p.rating >= 80) prob = 25;
    else if(p.rating >= 75) prob = 30;
    else prob = 40;
    total += prob;
    return prob;
  });
  let r = Math.random() * total, s = 0;
  for(let i = 0; i < players.length; i++){
    s += probs[i];
    if(r <= s) return players[i];
  }
  return players[players.length-1];
 }

 const grid=document.getElementById("packGrid");

 packs.forEach((p,i)=>{
  const d=document.createElement("div");
  d.className="pack";
  d.innerHTML=`
   ${p.type==="weekly"?'<div class="tag">3 Ù…Ø±Ø§Øª</div>':''}
   ${p.type==="boxPack"?'<div class="tag">Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</div>':''}
   <img src="${p.image}">
   <h3>${p.name}</h3>
   <div class="price">${p.cost} ğŸŸ¡</div>
   <button class="btn view">ğŸ‘ï¸ Ø±Ø¤ÙŠØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
   <button class="btn buy">Ø´Ø±Ø§Ø¡</button>
   ${p.type==="single"?'<button class="btn buy9">ÙØªØ­ 9 Ù„Ø§Ø¹Ø¨ÙŠÙ† - 900 ğŸŸ¡</button>':''}
   <div class="animation" id="a${i}">âš½ ÙØªØ­ Ø§Ù„Ø¨ÙƒØ§Ø¬...</div>
   <div class="result-card" id="r${i}"></div>
  `;
  grid.appendChild(d);

  d.querySelector(".view").onclick=e=>{
   e.stopPropagation();
   showPlayers(i);
  };

  d.querySelector(".buy").onclick=e=>{
   e.stopPropagation();
   buyPack(p,i,d);
  };

  if(p.type==="single"){
    d.querySelector(".buy9").onclick = e=>{
      e.stopPropagation();
      buy9Pack(p,i,d);
    };
  }
 });

 function buyPack(p,i,d){
  userRef.once("value").then(s=>{
    const u=s.val();
    if(p.type==="weekly"){
      const weekly = u.weekly || {};
      const opened = weekly[p.name] || 0;
      if(opened >= p.max) return alert("âŒ Ø§Ù†ØªÙ‡Øª Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§ÙƒØ¬");
      if(u.coins < p.cost) return alert("âŒ Coins ØºÙŠØ± ÙƒØ§ÙÙŠØ©");
      weekly[p.name] = opened + 1;
      userRef.update({ coins: u.coins - p.cost, weekly: weekly });
      openAnim(i, ()=> addOne(p,i));
    }
    if(p.type==="single"){
      if(u.coins < p.cost) return alert("âŒ Coins ØºÙŠØ± ÙƒØ§ÙÙŠØ©");
      userRef.update({ coins: u.coins - p.cost });
      openAnim(i, ()=> addOne(p,i));
    }
    if(p.type==="boxPack"){
      const boxes = u.boxPurchased || {};
      if(boxes[p.name]) return alert("âŒ ØªÙ… Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§ÙƒØ¬");
      if(u.coins < p.cost) return alert("âŒ Coins ØºÙŠØ± ÙƒØ§ÙÙŠØ©");
      if(!confirm("Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„ØŸ")) return;
      boxes[p.name] = true;
      userRef.update({ coins: u.coins - p.cost, boxPurchased: boxes });
      openAnim(i, ()=> addAll(p,d));
    }
  });
 }

 function buy9Pack(p,i,d){
  userRef.once("value").then(s=>{
    const u=s.val();
    if(u.coins < 900) return alert("âŒ Coins ØºÙŠØ± ÙƒØ§ÙÙŠØ©");
    userRef.update({ coins: u.coins - 900 });
    openAnim(i, ()=>{
      const ref=firebase.database().ref("usersefoot/"+uid+"/players");
      let html = '';
      let maxRating = 0;
      for(let j=0;j<9;j++){
        const pl = rand(p.players);
        ref.push(pl);
        html += `
          <div class="card">
            <img src="${pl.img}">
            <div>${pl.name}</div>
            <div class="rating">â­ ${pl.rating}</div>
            <div class="pos">${pl.position}</div>
          </div>`;
        if(pl.rating > maxRating) maxRating = pl.rating;
      }
      document.getElementById("r"+i).innerHTML = html;
      if(maxRating >= 99 && p.video) showVideo(p.video);
    });
  });
 }

 function openAnim(i,cb){
  document.getElementById("a"+i).style.display="flex";
  setTimeout(()=>{
   document.getElementById("a"+i).style.display="none";
   cb();
  },2000);
 }

 function addOne(p,i){
  const pl=rand(p.players);
  firebase.database().ref("usersefoot/"+uid+"/players").push(pl);
  document.getElementById("r"+i).innerHTML=`
   <div class="card">
    <img src="${pl.img}">
    <div>${pl.name}</div>
    <div class="rating">â­ ${pl.rating}</div>
    <div class="pos">${pl.position}</div>
   </div>`;
   
   if(pl.rating >= 99 && p.video) showVideo(p.video);
 }

 function addAll(p,d){
  const ref=firebase.database().ref("usersefoot/"+uid+"/players");
  p.players.forEach(pl=>ref.push(pl));
  d.classList.add("disabled");
  alert("ğŸ‰ ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„");
 }

 function showPlayers(i){
  const p=packs[i];
  document.getElementById("modalTitle").innerText=p.name;
  const g=document.getElementById("modalPlayers");
  g.innerHTML="";
  p.players.forEach(pl=>{
   g.innerHTML+=`
    <div class="card">
     <img src="${pl.img}">
     <div>${pl.name}</div>
     <div class="rating">â­ ${pl.rating}</div>
     <div class="pos">${pl.position}</div>
    </div>`;
  });
  document.getElementById("modal").style.display="flex";
 }

 function closeModal(){
  document.getElementById("modal").style.display="none";
 }

 document.getElementById("modal").onclick=function(e){
  if(e.target.id==="modal") closeModal();
 }

 // --- VIDEO FUNCTIONS ---
 function showVideo(videoSrc){
  const videoModal = document.getElementById("videoModal");
  const video = document.getElementById("packVideo");
  video.src = videoSrc;
  videoModal.style.display = "flex";
  video.play();
  video.onended = closeVideo;
  videoModal.onclick = closeVideo;
 }

 function closeVideo(){
  const videoModal = document.getElementById("videoModal");
  const video = document.getElementById("packVideo");
  video.pause();
  videoModal.style.display = "none";
  video.src = "";
 }
});
</script>

</body>
</html>
