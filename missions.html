<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ðŸŽ¯ Ø§Ù„Ù…Ù‡Ø§Ù… - Quiz</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="firebase.js"></script>

<style>
body{
 margin:0;
 background:#0b0f1a;
 font-family:Arial;
 color:white;
}
.top{
 background:#12172a;
 padding:15px;
 display:flex;
 align-items:center;
 gap:15px;
}
.container{
 padding:20px;
 max-width:800px;
 margin:auto;
}
.question{
 background:#12172a;
 border-radius:20px;
 padding:20px;
 margin-bottom:20px;
}
.answers button{
 display:block;
 width:100%;
 margin-top:10px;
 padding:10px;
 border:none;
 border-radius:15px;
 cursor:pointer;
 background:#1e88e5;
 color:white;
 font-size:15px;
}
.answers button:disabled{
 background:#333;
 cursor:not-allowed;
}
.status{
 margin-top:10px;
 font-weight:bold;
}
.success{ color:#4caf50; }
.fail{ color:#f44336; }
</style>
</head>

<body>

<div class="top">
 <div onclick="history.back()" style="cursor:pointer">â¬… Ø±Ø¬ÙˆØ¹</div>
 <h3>ðŸŽ¯ Ø§Ù„Ù…Ù‡Ø§Ù… (Quiz)</h3>
</div>

<div class="container" id="quiz"></div>

<script>
firebase.auth().onAuthStateChanged(user=>{
 if(!user) return location="auth.html";
 const uid=user.uid;
 const ref=firebase.database().ref("usersefoot/"+uid);

 const questions=[
  {
   q:"Ù…Ù† Ù‡Ùˆ Ø£ÙØ¶Ù„ Ù„Ø§Ø¹Ø¨ ÙÙŠ eFootball 2024ØŸ",
   a:["MbappÃ©","Messi","Haaland"],
   c:0
  },
  {
   q:"ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ù„Ø¹Ø¨ØŸ",
   a:["9","10","11"],
   c:2
  },
  {
   q:"Ù…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ² CFØŸ",
   a:["Ù…Ø¯Ø§ÙØ¹","ÙˆØ³Ø·","Ù…Ù‡Ø§Ø¬Ù…"],
   c:2
  },
  {
   q:"ÙƒÙ… Ø´ÙˆØ· ÙÙŠ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ",
   a:["1","2","3"],
   c:1
  },
  {
   q:"Ø£ÙŠ ÙØ±ÙŠÙ‚ ÙŠÙ„Ø¹Ø¨ Ù„Ù‡ BellinghamØŸ",
   a:["Barcelona","Real Madrid","PSG"],
   c:1
  },
  {
   q:"Ù…Ø§ Ù„ÙˆÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ©ØŸ",
   a:["Ø°Ù‡Ø¨ÙŠ","ÙØ¶ÙŠ","Ø£Ø²Ø±Ù‚"],
   c:0
  },
  {
   q:"Ù…Ø§ Ù…Ø¹Ù†Ù‰ GKØŸ",
   a:["Ø­Ø§Ø±Ø³","Ù…Ù‡Ø§Ø¬Ù…","Ø¬Ù†Ø§Ø­"],
   c:0
  },
  {
   q:"ÙƒÙ… Ù…Ø¯Ø© Ø§Ù„Ø´ÙˆØ·ØŸ",
   a:["45","30","60"],
   c:0
  },
  {
   q:"Ø£ÙŠ Ù…Ø±ÙƒØ² Ù‡Ùˆ AMFØŸ",
   a:["ÙˆØ³Ø· Ù‡Ø¬ÙˆÙ…ÙŠ","Ù…Ø¯Ø§ÙØ¹","Ø­Ø§Ø±Ø³"],
   c:0
  },
  {
   q:"ÙƒÙ… Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„ØªØ´ÙƒÙŠÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŸ",
   a:["9","10","11"],
   c:2
  }
 ];

 const box=document.getElementById("quiz");

 ref.child("quiz").once("value").then(snap=>{
  const saved=snap.val()||{};
  questions.forEach((q,i)=>{
   const key="q"+(i+1);
   const state=saved[key];

   const div=document.createElement("div");
   div.className="question";
   div.innerHTML=`<h4>${i+1}. ${q.q}</h4>`;
   const ans=document.createElement("div");
   ans.className="answers";

   q.a.forEach((txt,index)=>{
    const b=document.createElement("button");
    b.innerText=txt;
    if(state!==undefined) b.disabled=true;

    b.onclick=()=>{
     checkAnswer(key,index,q.c,b,ans,div);
    };
    ans.appendChild(b);
   });

   div.appendChild(ans);

   if(state===true)
    div.innerHTML+=`<div class="status success">âœ” Ø±Ø¨Ø­Øª 50 ÙƒÙˆÙŠÙ†Ø²</div>`;
   else if(state===false)
    div.innerHTML+=`<div class="status fail">âœ– Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©</div>`;

   box.appendChild(div);
  });
 });
 
 function checkAnswer(key,sel,correct,btn,ans,div){
  Array.from(ans.children).forEach(b=>b.disabled=true);

  if(sel===correct){
   div.innerHTML+=`<div class="status success">âœ” ØµØ­ÙŠØ­ (+50)</div>`;
   ref.child("quiz/"+key).set(true);
   ref.child("coins").transaction(c=>(c||0)+50);
  }else{
   div.innerHTML+=`<div class="status fail">âœ– Ø®Ø·Ø£ (Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø©)</div>`;
   ref.child("quiz/"+key).set(false);
  }
 }
});
</script>

</body>
</html>
